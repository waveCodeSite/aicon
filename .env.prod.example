# AICG平台生产环境配置
# 复制此文件为 .env.prod 并修改相应配置

# =============================================================================
# 应用基础配置
# =============================================================================
APP_NAME=AICG内容分发平台
ENVIRONMENT=production
DEBUG=false
API_V1_PREFIX=/api/v1

# =============================================================================
# 数据库配置
# =============================================================================
POSTGRES_DB=aicg_platform
POSTGRES_USER=aicg_user
POSTGRES_PASSWORD=your_secure_postgres_password

# 数据库连接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_PRE_PING=true
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# Redis配置
# =============================================================================
REDIS_PASSWORD=your_secure_redis_password

# Celery配置
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC

# =============================================================================
# MinIO对象存储配置
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=your_secure_minio_password
MINIO_BUCKET_NAME=aicg-platform

# =============================================================================
# CORS配置
# =============================================================================
# 生产环境应设置具体域名
CORS_ALLOW_ORIGINS=["https://your-domain.com"]
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=INFO
STRUCTURED_LOGGING=true
LOG_FORMAT=json

# =============================================================================
# 监控配置
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# OpenTelemetry配置
OTEL_SERVICE_NAME=aicg-platform-backend
OTEL_RESOURCE_ATTRIBUTES=service.name=aicg-platform-backend,service.version=1.0.0

# =============================================================================
# 安全配置 (生产环境必须修改!)
# =============================================================================
# JWT密钥 - 使用以下命令生成: openssl rand -hex 32
JWT_SECRET_KEY=your_super_secret_jwt_key_change_this_in_production

# API密钥加密密钥 - 使用以下命令生成: openssl rand -base64 32
API_KEY_ENCRYPTION_KEY=your_api_key_encryption_key_change_this

# 允许的主机
ALLOWED_HOSTS=["your-domain.com", "www.your-domain.com"]

# SSL/HTTPS配置
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true

# =============================================================================
# API限流配置
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# 错误监控配置 (可选)
# =============================================================================
# Sentry
# SENTRY_DSN=your-sentry-dsn-here

# Airbrake
# AIRBRAKE_PROJECT_ID=your-airbrake-project-id
# AIRBRAKE_PROJECT_KEY=your-airbrake-project-key

# =============================================================================
# 邮件配置 (可选)
# =============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_TLS=true

# =============================================================================
# 缓存配置
# =============================================================================
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300

# =============================================================================
# 任务队列配置
# =============================================================================
TASK_QUEUE_NAME=aicg-platform
# TASK_ROUTES={"src.workers.video.*": {"queue": "video_processing"}}
# TASK_ROUTES={"src.workers.notification.*": {"queue": "notifications"}}
